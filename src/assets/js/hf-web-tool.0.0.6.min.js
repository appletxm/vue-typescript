!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).HfWebTool=t()}(this,function(){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function c(e){var t="?timer="+(new Date).getTime()+"&",n=e.params,i=Object.keys(n);if(0<=e.headers.contentType.indexOf("application/json"))t=t+"params="+encodeURIComponent(JSON.stringify(n));else for(var o=0;o<i.length;o++)t+=i[o]+"="+n[i[o]]+(o===i.length-1?"":"&");return t}var o={method:"GET",async:!0,url:"",params:{},timeout:3e4,headers:{contentType:"application/json; charset=UTF-8"}},d={},t=function(){function t(e){n(this,t),this.options=Object.assign(o,e)}return e(t,[{key:"mergeOptions",value:function(e){var t=JSON.parse(JSON.stringify(this.options));return e=Object.assign(t,e)}},{key:"createXHR",value:function(e){var t;return window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest),t.timeout&&(t.timeout=e.timeout),t}},{key:"addEventListener",value:function(i,o,r,t){var a=this,s=d[i].xhr;if(!s)return!1;s.onreadystatechange=function(){var e,t;if(4===s.readyState&&200===s.status){var n=s.getResponseHeader("content-type");0<=n.indexOf("application/octet-stream")||0<=n.indexOf("application/x-msdownload")?function(e){var t=new Blob([e.response],{type:"application/vnd.ms-excel"}),n=e.getResponseHeader("content-disposition").match(/filename=([^;]+)/),i=n&&n[1]?decodeURIComponent(n[1]):"download.excel";if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t,i);else{var o=URL.createObjectURL(t),r=document.createElement("a"),a=document.querySelector("body");o.indexOf(window.location.host)<0&&(o=o.replace(/^(blob:)(.+)$/,function(e,t,n){return t+(window.location.protocol+"//"+window.location.host)+"/"+n})),r.href=o,r.download=i,a.appendChild(r),r.click(),a.removeChild(r)}}(s):((t=s.responseText.replace(/^[\s\t\r\n]+|[\s\t\r\n]+$/g,""))&&(e=t&&JSON.parse(s.responseText)),a.destroyed(i),o({code:"200",data:e}))}else 4===s.readyState&&200!==s.status&&(a.destroyed(i),r({code:"500",msg:s.response}))},s.addEventListener&&(s.addEventListener("timeout",function(){a.destroyed(i),r({code:"10000",msg:"request timeout"})}),s.addEventListener("error",function(e){a.destroyed(i),r({code:"500",msg:e})}),t.onProgress&&"function"==typeof t.onProgress&&s.addEventListener("progress",function(e){t.onProgress(e)}))}},{key:"destroyed",value:function(e){d[e]&&delete d[e]}},{key:"prepareForAjax",value:function(e){var n,i;e=this.mergeOptions(e);var t=Math.random()+"";d[t]={};var o=this.createXHR(e);return{options:d[t].options=e,xhrId:d[t].xhrId=t,xhrObj:d[t].xhr=o,promise:new Promise(function(e,t){i=t,n=e}),resolveCb:n,rejectCb:i}}},{key:"doAjax",value:function(e,t){t.open(e.method,e.url,e.async),function(e,t){var n=e.headers;for(var i in n){var o="contentType"===i?"Content-Type":i;t.setRequestHeader(o,n[i])}}(e,t),t.send(e.paramsStr)}},{key:"get",value:function(e){var t;e.method="GET";var n=this.prepareForAjax(e),i=n.options,o=n.xhrObj,r=n.promise,a=n.resolveCb,s=n.rejectCb,d=n.xhrId;return"GET"===i.method&&o&&(t=c(i)),i.url=i.url+t,this.addEventListener(d,a,s,i),this.doAjax(i,o),r}},{key:"post",value:function(e){e.method="POST";var t=this.prepareForAjax(e),n=t.options,i=t.xhrObj,o=t.promise,r=t.resolveCb,a=t.rejectCb,s=t.xhrId;return"POST"===n.method&&i&&(n.paramsStr=function(e){var t="",n=e.params,i=Object.keys(n);if(0<=e.headers.contentType.indexOf("application/json"))t=JSON.stringify(n);else if(0<=e.headers.contentType.indexOf("application/x-www-form-urlencoded"))for(var o=0;o<i.length;o++)t+=i[o]+"="+encodeURIComponent(n[i[o]])+(o===i.length-1?"":"&");else(0<=e.headers.contentType.indexOf("multipart/form-data")||0<=e.headers.contentType.indexOf("text/xml"))&&(t="");return t}(n)),this.addEventListener(s,r,a,n),this.doAjax(n,i),o}},{key:"getBinary",value:function(e){var t;e.method="GET";var n=this.prepareForAjax(e),i=n.options,o=n.xhrObj,r=n.promise,a=n.resolveCb,s=n.rejectCb,d=n.xhrId;return"GET"===i.method&&o&&(t=c(i)),i.url=i.url+t,o.responseType="arraybuffer",this.addEventListener(d,a,s,i),this.doAjax(i,o),r}}]),t}();function r(e,t){var n;return e&&"function"==typeof e&&((n=e(t))instanceof a?n:new a(n))}var a=function(){function t(e){n(this,t),this.pending=!0,this.fullfilled=!1,this.rejected=!1,this.thenCb=null,this.catchCb=null,this.finalyCb=null,e&&e(this.resolve.bind(this),this.reject.bind(this))}return e(t,[{key:"resolve",value:function(e){this.fullfilled=!0,r(this.thenCb,e),r(this.finalyCb)}},{key:"reject",value:function(e){this.rejected=!0,r(this.catchCb,e),r(this.finalyCb)}},{key:"then",value:function(e){this.thenCb=e}},{key:"catch",value:function(e){this.catchCb=e}},{key:"finaly",value:function(e){this.finalyCb=e}}]),t}(),f='<svg t="1586508923797" style="display: inline-block; vertical-align: middle;" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13436" width="96" height="96"><path d="M494.933333 989.866667c-10.24 0-17.066667-6.826667-17.066666-17.066667V17.066667c0-10.24 6.826667-17.066667 17.066666-17.066667s17.066667 6.826667 17.066667 17.066667v955.733333c0 10.24-6.826667 17.066667-17.066667 17.066667z" fill="#d83a26" p-id="13437"></path><path d="M972.8 512H17.066667c-10.24 0-17.066667-6.826667-17.066667-17.066667s6.826667-17.066667 17.066667-17.066666h955.733333c10.24 0 17.066667 6.826667 17.066667 17.066666s-6.826667 17.066667-17.066667 17.066667zM870.4 238.933333h-750.933333c-10.24 0-17.066667-6.826667-17.066667-17.066666s6.826667-17.066667 17.066667-17.066667h750.933333c10.24 0 17.066667 6.826667 17.066667 17.066667s-6.826667 17.066667-17.066667 17.066666zM494.933333 750.933333h-409.6c-10.24 0-17.066667-6.826667-17.066666-17.066666s6.826667-17.066667 17.066666-17.066667h409.6c10.24 0 17.066667 6.826667 17.066667 17.066667s-6.826667 17.066667-17.066667 17.066666z" fill="#d83a26" p-id="13438"></path><path d="M494.933333 989.866667C334.506667 989.866667 204.8 768 204.8 494.933333S334.506667 0 494.933333 0 785.066667 221.866667 785.066667 494.933333c0 10.24-6.826667 17.066667-17.066667 17.066667s-17.066667-6.826667-17.066667-17.066667C750.933333 242.346667 634.88 34.133333 494.933333 34.133333S238.933333 242.346667 238.933333 494.933333 354.986667 955.733333 494.933333 955.733333c10.24 0 17.066667 6.826667 17.066667 17.066667s-6.826667 17.066667-17.066667 17.066667z" fill="#d83a26" p-id="13439"></path><path d="M494.933333 989.866667C221.866667 989.866667 0 768 0 494.933333S221.866667 0 494.933333 0 989.866667 221.866667 989.866667 494.933333c0 17.066667 0 34.133333-3.413334 54.613334 0 10.24-10.24 17.066667-20.48 13.653333-10.24 0-17.066667-10.24-13.653333-20.48 3.413333-17.066667 3.413333-34.133333 3.413333-47.786667C955.733333 242.346667 747.52 34.133333 494.933333 34.133333S34.133333 242.346667 34.133333 494.933333 242.346667 955.733333 494.933333 955.733333c20.48 0 40.96 0 64.853334-6.826666 10.24 0 17.066667 6.826667 20.48 13.653333 0 10.24-6.826667 17.066667-13.653334 20.48-27.306667 3.413333-51.2 6.826667-71.68 6.826667z" fill="#d83a26" p-id="13440"></path><path d="M802.133333 887.466667c-10.24 0-17.066667-6.826667-17.066666-17.066667v-170.666667c0-10.24 6.826667-17.066667 17.066666-17.066666s17.066667 6.826667 17.066667 17.066666v170.666667c0 10.24-6.826667 17.066667-17.066667 17.066667z" fill="#d83a26" p-id="13441"></path><path d="M802.133333 1024c-122.88 0-221.866667-98.986667-221.866666-221.866667s98.986667-221.866667 221.866666-221.866666 221.866667 98.986667 221.866667 221.866666-98.986667 221.866667-221.866667 221.866667z m0-409.6c-102.4 0-187.733333 85.333333-187.733333 187.733333s85.333333 187.733333 187.733333 187.733334 187.733333-85.333333 187.733334-187.733334-85.333333-187.733333-187.733334-187.733333z" fill="#d83a26" p-id="13442"></path><path d="M802.133333 955.733333c-10.24 0-17.066667-6.826667-17.066666-17.066666s6.826667-17.066667 17.066666-17.066667 17.066667 6.826667 17.066667 17.066667-6.826667 17.066667-17.066667 17.066666z" fill="#d83a26" p-id="13443"></path></svg>',h=null,v=!1,m=550,b=300,y=64,x="js-web-offline-panel";function s(){h&&(h.style.display="none")}function l(e){h=document.querySelector("."+x);var t,n,i,o,r,a,s,d=(v=m>document.documentElement.clientWidth)?b:m;if(h)h.style.display="block";else{(s=document.createElement("div")).setAttribute("class",x),s.setAttribute("style","position: fixed; width: 100vw; height: 100vh; top: 0; left: 0; z-index: 999999; font-size: 0;"),h=s;var c=((a=document.createElement("div")).setAttribute("style","position: fixed; width: 100vw; height: 100vh; top: 0; left: 0; background-color: rgba(0,0,0,0.2);"),a),l=(o=d,(r=document.createElement("div")).setAttribute("style","box-sizing: content-box; position: relative; padding: 20px; width: ".concat(o,"px; height: 160px; line-height: 160px; position: fixed; top: 50%; left:  50%; margin: -80px -").concat((o+40)/2,"px;  background-color: rgba(255,255,255,1); box-shadow: 0 2px 8px rgba(0,0,0,.1); border-radius: 4px;")),r),p=(t=v,n=f,(i=document.createElement("span")).setAttribute("style","display: inline-block; vertical-align: middle; ".concat(t?"":"margin-left: 20px;")),!0===t&&(n=n.replace(/(width|height)="(\d+)"/g,function(e,t,n){return t+'="'+y+'"'})),i.innerHTML=n,i),u=function(e,t){var n=document.createElement("span");n.setAttribute("style","position: absolute; top: ".concat(e?45:55,"px; left: ").concat(e?100:165,"px; right: 20px; bottom: ").concat(e?45:55,"px; line-height: 32px; display: block; padding-left: ").concat(e?20:30,"px; border-left: 1px solid #eee;")),n.innerHTML='<span style="color: #666; font-size: 18px; font-weight: 300; line-height: 24px;">网络出现故障，请检查你的网络是否通畅</span>';var i=document.createElement("button");return i.innerHTML="确定",i.setAttribute("style","display: block; outline: none; cursor: pointer; color: #fff; font-size: 16px; border: 0; width:80px; height:36px; line-height: 36px; background:linear-gradient(134deg,rgba(241,192,140,1) 0%,rgba(215,153,87,1) 100%); border-radius:4px;"),i.addEventListener("click",function(){t&&"function"==typeof t&&t()}),n.appendChild(i),n}(v,e);l.appendChild(p),l.appendChild(u),h.appendChild(c),h.appendChild(l),document.body.appendChild(h)}}var p={step:5e3,timer:0};function u(){var e=p.timer,t=p.onlineCb,n=p.offlineCb;navigator.onLine?(s(),clearTimeout(e),t&&"function"==typeof t&&t()):n&&"function"==typeof n?n():l(g)}function g(){var e=p.timer,t=p.step;s(),clearTimeout(e),e=setTimeout(function(){u()},t)}return{Ajax:t,MyPromise:a,networkDownControl:function(e){p=function(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)e[n]=t[n];return e}(p,e),window.addEventListener("load",function(){window.addEventListener("online",function(){u()}),window.addEventListener("offline",function(){u()})})}}});